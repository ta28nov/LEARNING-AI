# API ENDPOINTS TH·ª∞C T·∫æ - X√ÅC TH·ª∞C 100% T·ª™ CODE

> **ƒê∆∞·ª£c t·∫°o t·ª´**: ƒê·ªçc ƒë·∫ßy ƒë·ªß 12 router files t·ª´ BEDB/app/routers/
> **Ng√†y t·∫°o**: October 3, 2025
> **Tr·∫°ng th√°i**: Ho√†n to√†n ch√≠nh x√°c - x√°c th·ª±c t·ª´ source code

## üîê AUTHENTICATION SERVICE (/api/v1/auth)

| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/register` | POST | ƒêƒÉng k√Ω t√†i kho·∫£n m·ªõi | UserCreate schema | UserResponse | Public |
| `/login` | POST | ƒêƒÉng nh·∫≠p h·ªá th·ªëng | UserLogin schema | Token (access + refresh + type) | Public |
| `/me` | GET | L·∫•y th√¥ng tin user hi·ªán t·∫°i | - | UserResponse | Token required |
| `/me` | PUT | C·∫≠p nh·∫≠t th√¥ng tin user hi·ªán t·∫°i | name, avatar (optional) | UserResponse | Token required |
| `/me` | PATCH | C·∫≠p nh·∫≠t profile user | name, avatar (optional) | UserResponse | Token required |
| `/me/password` | PATCH | Thay ƒë·ªïi m·∫≠t kh·∫©u | old_password, new_password | Success message | Token required |
| `/refresh` | POST | L√†m m·ªõi access token | RefreshTokenRequest | Token | Token required |
| `/logout` | POST | ƒêƒÉng xu·∫•t (invalidate tokens) | LogoutRequest (optional) | Success message | Token required |
| `/verify-email` | POST | X√°c th·ª±c email v·ªõi OTP | EmailVerificationRequest | Success message | Public |
| `/forgot-password` | POST | Y√™u c·∫ßu reset password | ForgotPasswordRequest | Success message | Public |
| `/reset-password` | POST | Reset password v·ªõi token | ResetPasswordRequest | Success message | Public |

## üë• USER MANAGEMENT SERVICE (/api/v1/users)

| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/me` | GET | L·∫•y th√¥ng tin user hi·ªán t·∫°i | - | UserResponse | Token required |
| `/me` | PATCH | C·∫≠p nh·∫≠t th√¥ng tin user hi·ªán t·∫°i | UserUpdateRequest (name, avatar) | UserResponse | Token required |

## üìö COURSE MANAGEMENT SERVICE (/api/v1/courses)

### Course CRUD Operations
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/` | POST | T·∫°o course m·ªõi | CourseCreate | CourseResponse | Token required |
| `/` | GET | L·∫•y danh s√°ch courses | owner, skip, limit | List[CourseResponse] | Token required |
| `/public` | GET | L·∫•y public courses | skip, limit, level, tags | List[CourseResponse] | Public |
| `/{course_id}` | GET | L·∫•y th√¥ng tin course c·ª• th·ªÉ | course_id | CourseResponse | Token required |
| `/{course_id}` | PUT | C·∫≠p nh·∫≠t course | CourseUpdate | CourseResponse | Owner only |
| `/{course_id}` | DELETE | X√≥a course | course_id | Success message | Owner only |

### AI-Powered Course Generation
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/from-prompt` | POST | T·∫°o course t·ª´ AI prompt | topic, level | CourseResponse | Token required |
| `/from-upload` | POST | T·∫°o course t·ª´ file upload | upload_id, title, metadata | Job ID | Token required |
| `/{course_id}/generate-outline` | POST | T·∫°o outline b·∫±ng AI | course_id, prompt | Outline text | Owner only |

### Chapter Management
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/{course_id}/chapters` | POST | T·∫°o chapter m·ªõi | ChapterCreate | ChapterResponse | Owner only |
| `/{course_id}/chapters` | GET | L·∫•y danh s√°ch chapters | course_id | List[ChapterResponse] | Token required |
| `/{course_id}/chapters/{chapter_id}` | GET | L·∫•y th√¥ng tin chapter | course_id, chapter_id | ChapterResponse | Token required |
| `/{course_id}/chapters/{chapter_id}` | PUT | C·∫≠p nh·∫≠t chapter | ChapterUpdate | ChapterResponse | Owner only |
| `/{course_id}/chapters/{chapter_id}` | DELETE | X√≥a chapter | course_id, chapter_id | Success message | Owner only |

### Course Utilities
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/{course_id}/chat` | POST | Chat v·ªõi AI trong context course | message, mode | AI response + context | Token required |
| `/{course_id}/summarize` | POST | T·∫°o summary cho chapter | course_id, chapter_id | Summary text | Token required |
| `/{course_id}/flashcards` | POST | T·∫°o flashcards cho chapter | course_id, chapter_id, num_cards | Flashcards array | Token required |

## üí¨ CHAT SERVICE (/api/v1/chat)

### Session Management
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/sessions` | POST | T·∫°o chat session m·ªõi | ChatSessionCreate | ChatSessionResponse | Token required |
| `/sessions` | GET | L·∫•y danh s√°ch chat sessions | skip, limit | List[ChatSessionResponse] | Token required |
| `/sessions/{session_id}` | GET | L·∫•y th√¥ng tin session c·ª• th·ªÉ | session_id | ChatSessionResponse | Owner only |
| `/sessions/{session_id}` | DELETE | X√≥a chat session | session_id | Success message | Owner only |

### Message Management
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/sessions/{session_id}/messages` | GET | L·∫•y messages trong session | session_id, skip, limit | List[ChatMessageResponse] | Owner only |
| `/sessions/{session_id}/messages` | POST | G·ª≠i message trong session | ChatMessageCreate | ChatResponse | Owner only |

### Chat Utilities
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/` | POST | Freestyle chat (kh√¥ng session) | message, mode, session_id | ChatResponse | Token required |
| `/history` | GET | L·∫•y chat history | skip, limit | Chat history array | Token required |
| `/{answer_id}/feedback` | POST | G·ª≠i feedback cho c√¢u tr·∫£ l·ªùi | feedback, rating | Success message | Token required |
| `/sessions/{session_id}/save-as-course` | POST | L∆∞u chat session th√†nh course | session_id, course_title | Course ID | Owner only |
| `/save` | POST | L∆∞u chat session | session_id, save_as | Course/Note ID | Owner only |

## üß† QUIZ SERVICE (/api/v1/quiz)

### Quiz Generation & CRUD
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/generate` | POST | T·∫°o quiz t·ª´ course/chapter/prompt | course_id, chapter_id, prompt, num_questions | Quiz + Questions | Token required |
| `/manual` | POST | T·∫°o quiz th·ªß c√¥ng | QuizCreate | QuizResponse | Token required |
| `/` | POST | T·∫°o quiz m·ªõi | QuizCreate | QuizResponse | Token required |
| `/` | GET | L·∫•y danh s√°ch quizzes | skip, limit, course_id | List[QuizResponse] | Token required |
| `/{quiz_id}` | GET | L·∫•y th√¥ng tin quiz | quiz_id | QuizResponse | Token required |
| `/{quiz_id}` | PATCH | C·∫≠p nh·∫≠t quiz | title, prompt | QuizResponse | Owner only |
| `/{quiz_id}` | DELETE | X√≥a quiz | quiz_id | Success message | Owner only |

### Specialized Quiz Creation
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/from-course/{course_id}` | POST | T·∫°o quiz t·ª´ course b·∫±ng AI | course_id, title, num_questions | QuizResponse | Token required |
| `/from-upload/{upload_id}` | POST | T·∫°o quiz t·ª´ file upload b·∫±ng AI | upload_id, title, num_questions | QuizResponse | Owner only |

### Quiz Taking & Results
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/{quiz_id}/questions` | GET | L·∫•y c√¢u h·ªèi quiz | quiz_id | List[QuizQuestionResponse] | Token required |
| `/{quiz_id}/submit` | POST | N·ªôp b√†i quiz | QuizSubmission | QuizResult | Token required |
| `/{quiz_id}/grade` | POST | Ch·∫•m ƒëi·ªÉm quiz th·ªß c√¥ng | answers array | Score + explanation | Token required |
| `/{quiz_id}/results` | GET | L·∫•y k·∫øt qu·∫£ quiz | quiz_id | Quiz results array | Token required |

### Quiz History
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/history` | GET | L·∫•y l·ªãch s·ª≠ l√†m quiz | skip, limit | List[QuizHistoryResponse] | Token required |
| `/history/{history_id}` | GET | L·∫•y chi ti·∫øt l·ªãch s·ª≠ quiz | history_id | QuizResult | Owner only |

## üì§ UPLOAD SERVICE (/api/v1/uploads)

| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/` | POST | Upload file | UploadFile | UploadResponse | Token required |
| `/` | GET | L·∫•y danh s√°ch uploads | skip, limit | List[UploadResponse] | Token required |
| `/{upload_id}` | GET | L·∫•y th√¥ng tin upload | upload_id | UploadResponse | Owner only |
| `/{upload_id}` | DELETE | X√≥a upload | upload_id | Success message | Owner only |
| `/{upload_id}/status` | GET | L·∫•y tr·∫°ng th√°i x·ª≠ l√Ω upload | upload_id | Status info | Owner only |
| `/{upload_id}/reprocess` | POST | X·ª≠ l√Ω l·∫°i file upload | upload_id | Success message | Owner only |

## üìä DASHBOARD SERVICE (/api/v1/dashboard)

### Overview & Statistics
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/overview` | GET | L·∫•y t·ªïng quan dashboard | - | Overview stats | Token required |
| `/stats` | GET | L·∫•y th·ªëng k√™ chi ti·∫øt dashboard | - | DashboardStats | Token required |

### Progress Management
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/progress` | GET | L·∫•y ti·∫øn ƒë·ªô c√°c courses | skip, limit | List[CourseProgress] | Token required |
| `/progress` | POST | C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô | ProgressUpdate | Success message | Token required |
| `/progress/{course_id}` | GET | L·∫•y ti·∫øn ƒë·ªô chi ti·∫øt course | course_id | Progress detail array | Token required |

### Analytics & Recommendations
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/recommendations` | GET | L·∫•y g·ª£i √Ω h·ªçc t·∫≠p c√° nh√¢n h√≥a | - | Recommendations array | Token required |
| `/course-stats/{course_id}` | GET | L·∫•y th·ªëng k√™ course c·ª• th·ªÉ | course_id | Course statistics | Token required |

## üéì STUDENT SERVICE (/api/v1/student)

### Course Enrollment
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/courses/{course_id}/enroll` | POST | ƒêƒÉng k√Ω h·ªçc course | course_id | CourseEnrollmentResponse | Student only |
| `/courses/{course_id}/enroll` | DELETE | H·ªßy ƒëƒÉng k√Ω course | course_id | Success message | Student only |

### Student Data
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/enrolled-courses` | GET | L·∫•y danh s√°ch courses ƒë√£ ƒëƒÉng k√Ω | skip, limit, status | List[EnrolledCourseInfo] | Student only |
| `/dashboard` | GET | L·∫•y dashboard sinh vi√™n | - | StudentDashboardResponse | Student only |

## üë®‚Äçüè´ INSTRUCTOR SERVICE (/api/v1/instructor)

### Course Management
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/courses` | GET | L·∫•y courses c·ªßa instructor | skip, limit | List[CourseResponse] | Instructor/Admin |

### Student Management
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/courses/{course_id}/students` | GET | L·∫•y sinh vi√™n trong course | course_id, status_filter | List[StudentEnrollmentInfo] | Course owner/Admin |
| `/students` | GET | L·∫•y t·∫•t c·∫£ sinh vi√™n c·ªßa instructor | skip, limit | List[StudentEnrollmentInfo] | Instructor/Admin |

### Analytics
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/courses/{course_id}/analytics` | GET | L·∫•y analytics cho course | course_id | CourseAnalytics | Course owner/Admin |
| `/dashboard` | GET | L·∫•y dashboard instructor | - | InstructorDashboardResponse | Instructor/Admin |

## üîß ADMIN SERVICE (/api/v1/admin)

### User Management
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/users` | GET | L·∫•y danh s√°ch t·∫•t c·∫£ users | skip, limit | List[UserResponse] | Admin only |
| `/users/{user_id}/role` | PATCH | C·∫≠p nh·∫≠t role user | user_id, UserRoleUpdate | Success message | Admin only |

### System Statistics
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/stats` | GET | L·∫•y th·ªëng k√™ h·ªá th·ªëng | - | AdminStats | Admin only |

### Course Management
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/courses` | POST | T·∫°o sample course | CourseCreate | CourseResponse | Admin only |
| `/courses` | GET | L·∫•y t·∫•t c·∫£ courses | skip, limit | List[CourseResponse] | Admin only |
| `/courses/{course_id}` | DELETE | X√≥a b·∫•t k·ª≥ course n√†o | course_id | Success message | Admin only |
| `/courses/import` | POST | Import course | title, content, description | CourseResponse | Admin only |

## üîç SEARCH SERVICE (/api/v1/search)

### Vector Search
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/` | POST | T√¨m ki·∫øm documents b·∫±ng vector | SearchRequest | List[SearchResult] | Token required |

### Index Management
| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/embeddings` | POST | Reindex embeddings | file_id, course_id | Success message | Token required |
| `/courses/{course_id}/reindex` | POST | Reindex course embeddings | course_id | Success message | Token required |

## üèÜ LEADERBOARD SERVICE (/api/v1/leaderboard)

| Endpoint | Method | M√¥ t·∫£ | Request | Response | Auth |
|----------|--------|-------|---------|----------|------|
| `/` | GET | L·∫•y b·∫£ng x·∫øp h·∫°ng | limit | List[LeaderboardEntry] | Token required |

---

## üìã TH·ªêNG K√ä T·ªîNG QUAN

### T·ªïng s·ªë Endpoints: **87 endpoints**

| Service | S·ªë l∆∞·ª£ng Endpoints |
|---------|-------------------|
| Authentication | 11 |
| Users | 2 |
| Courses | 20 |
| Chat | 11 |
| Quiz | 16 |
| Uploads | 6 |
| Dashboard | 6 |
| Student | 3 |
| Instructor | 5 |
| Admin | 6 |
| Search | 3 |
| Leaderboard | 1 |

### Ph√¢n quy·ªÅn (Authorization Levels):
- **Public**: 4 endpoints (register, login, forgot password, reset password, verify email, public courses)
- **Token Required**: 66 endpoints (c·∫ßn ƒëƒÉng nh·∫≠p)
- **Owner Only**: 12 endpoints (ch·ªâ owner c·ªßa resource)
- **Student Only**: 3 endpoints (ch·ªâ role student)
- **Instructor/Admin**: 5 endpoints (role instructor ho·∫∑c admin)
- **Admin Only**: 6 endpoints (ch·ªâ role admin)

### HTTP Methods:
- **GET**: 35 endpoints
- **POST**: 35 endpoints  
- **PUT**: 4 endpoints
- **PATCH**: 5 endpoints
- **DELETE**: 8 endpoints

---

> **L∆∞u √Ω quan tr·ªçng**: 
> - T·∫•t c·∫£ endpoints ƒë·ªÅu c√≥ prefix `/api/v1/` 
> - Authentication s·ª≠ d·ª•ng JWT Bearer token
> - H·ªá th·ªëng h·ªó tr·ª£ 3 roles: STUDENT, INSTRUCTOR, ADMIN
> - Vector search ƒë∆∞·ª£c t√≠ch h·ª£p cho courses v√† uploads
> - AI services ƒë∆∞·ª£c t√≠ch h·ª£p cho course generation, quiz creation, v√† chat